---
title: Cosa accade quando viene installato un pacchetto
description: Informazioni dettagliate sul processo di installazione del pacchetto
author: JonDouglas
ms.author: jodou
ms.date: 06/20/2019
ms.topic: conceptual
ms.openlocfilehash: 2a16c1cfe1ada0d1a78cefcdb2bdc69b9c6e84cf
ms.sourcegitcommit: ee6c3f203648a5561c809db54ebeb1d0f0598b68
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/26/2021
ms.locfileid: "98775096"
---
# <a name="what-happens-when-a-nuget-package-is-installed"></a><span data-ttu-id="5ad2c-103">Cosa accade quando viene installato un pacchetto NuGet</span><span class="sxs-lookup"><span data-stu-id="5ad2c-103">What happens when a NuGet package is installed?</span></span>

<span data-ttu-id="5ad2c-104">Per semplificare, i diversi strumenti di NuGet creano in genere un riferimento a un pacchetto nel file di progetto o in `packages.config`, quindi eseguono un ripristino del pacchetto, che corrisponde in effetti all'installazione del pacchetto.</span><span class="sxs-lookup"><span data-stu-id="5ad2c-104">Simply said, the different NuGet tools typically create a reference to a package in the project file or `packages.config`, then perform a package restore, which effectively installs the package.</span></span> <span data-ttu-id="5ad2c-105">L'eccezione è `nuget install`, che espande solo il pacchetto in una cartella `packages` e non modifica altri file.</span><span class="sxs-lookup"><span data-stu-id="5ad2c-105">The exception is `nuget install`, which only expands the package into a `packages` folder and does not modify any other files.</span></span>

<span data-ttu-id="5ad2c-106">Il processo generale è il seguente:</span><span class="sxs-lookup"><span data-stu-id="5ad2c-106">The general process is as follows:</span></span>

1. <span data-ttu-id="5ad2c-107">(Tutti gli strumenti eccetto `nuget.exe`) Registrare l'identificatore di pacchetto e la versione nel file di progetto o in `packages.config`.</span><span class="sxs-lookup"><span data-stu-id="5ad2c-107">(All tools except `nuget.exe`) Record the package identifier and version into the project file or `packages.config`.</span></span>

   <span data-ttu-id="5ad2c-108">Se lo strumento di installazione è Visual Studio o l'interfaccia della riga di comando di dotnet, lo strumento tenta prima di tutto di installare il pacchetto.</span><span class="sxs-lookup"><span data-stu-id="5ad2c-108">If the installation tool is Visual Studio or the dotnet CLI, the tool first attempts to install the package.</span></span> <span data-ttu-id="5ad2c-109">Se non è compatibile, il pacchetto non viene aggiunto al file di progetto o a `packages.config`.</span><span class="sxs-lookup"><span data-stu-id="5ad2c-109">If it's incompatible, the package is not added to the project file or `packages.config`.</span></span>

2. <span data-ttu-id="5ad2c-110">Acquisire il pacchetto:</span><span class="sxs-lookup"><span data-stu-id="5ad2c-110">Acquire the package:</span></span>
   - <span data-ttu-id="5ad2c-111">Controllare se il pacchetto (in base all'identificatore esatto e al numero versione) è già installato nella cartella *global-packages* come descritto in [Gestione delle cartelle dei pacchetti globali e della cache](../consume-packages/managing-the-global-packages-and-cache-folders.md).</span><span class="sxs-lookup"><span data-stu-id="5ad2c-111">Check if the package (by exact identifer and version number) is already installed in the *global-packages* folder as described on [Managing the global packages and cache folders](../consume-packages/managing-the-global-packages-and-cache-folders.md).</span></span>

   - <span data-ttu-id="5ad2c-112">Se il pacchetto non si trova nella cartella *Global-Packages* , provare a recuperarlo dalle origini elencate nei [file di configurazione](../consume-packages/Configuring-NuGet-Behavior.md).</span><span class="sxs-lookup"><span data-stu-id="5ad2c-112">If the package is not in the *global-packages* folder, attempt to retrieve it from the sources listed in the [configuration files](../consume-packages/Configuring-NuGet-Behavior.md).</span></span> <span data-ttu-id="5ad2c-113">Per le origini online, tentare prima di tutto di recuperare il pacchetto dalla cache HTTP, a meno che non si specifichi `-NoCache` con i comandi `nuget.exe` o non si specifichi `--no-cache` con `dotnet restore`.</span><span class="sxs-lookup"><span data-stu-id="5ad2c-113">For online sources, attempt first to retrieve the package from the HTTP cache unless `-NoCache` is specified with `nuget.exe` commands or `--no-cache` is specified with `dotnet restore`.</span></span> <span data-ttu-id="5ad2c-114">(Visual Studio e `dotnet add package` usano sempre la cache). Se un pacchetto viene usato dalla cache, nell'output viene visualizzato "CACHE".</span><span class="sxs-lookup"><span data-stu-id="5ad2c-114">(Visual Studio and `dotnet add package` always use the cache.) If a package is used from the cache, "CACHE" appears in the output.</span></span> <span data-ttu-id="5ad2c-115">La cache ha una scadenza di 30 minuti.</span><span class="sxs-lookup"><span data-stu-id="5ad2c-115">The cache has an expiration time of 30 minutes.</span></span>

   - <span data-ttu-id="5ad2c-116">Se il pacchetto è stato specificato utilizzando una [versione a virgola mobile](../consume-packages/Package-References-in-Project-Files.md#floating-versions)o senza una versione minima *, NuGet* contatterà tutte le origini per individuare la migliore corrispondenza.</span><span class="sxs-lookup"><span data-stu-id="5ad2c-116">If the package has been specified using a [floating version](../consume-packages/Package-References-in-Project-Files.md#floating-versions), or without a minimum version, NuGet *will* contact all sources to figure out the best match.</span></span>
   <span data-ttu-id="5ad2c-117">Esempio: `1.*` `(, 2.0.0]` .</span><span class="sxs-lookup"><span data-stu-id="5ad2c-117">Example: `1.*`, `(, 2.0.0]`.</span></span>

   - <span data-ttu-id="5ad2c-118">Se il pacchetto non è presente nella cache HTTP, tentare di scaricarlo dalle origini elencate nella configurazione.</span><span class="sxs-lookup"><span data-stu-id="5ad2c-118">If the package is not in the HTTP cache, attempt to download it from the sources listed in the configuration.</span></span> <span data-ttu-id="5ad2c-119">Se un pacchetto viene scaricato, nell'output compaiono "GET" e "OK".</span><span class="sxs-lookup"><span data-stu-id="5ad2c-119">If a package is downloaded, "GET" and "OK" appear in the output.</span></span> <span data-ttu-id="5ad2c-120">NuGet registra il traffico HTTP con un livello di dettaglio normale.</span><span class="sxs-lookup"><span data-stu-id="5ad2c-120">NuGet logs http traffic on normal verbosity.</span></span>

   - <span data-ttu-id="5ad2c-121">Se il pacchetto non può essere acquisito correttamente da qualsiasi origine, l'installazione non riesce a questo punto con un errore come [NU1103](../reference/errors-and-warnings/NU1103.md).</span><span class="sxs-lookup"><span data-stu-id="5ad2c-121">If the package cannot be successfully acquired from any sources, installation fails at this point with an error such as [NU1103](../reference/errors-and-warnings/NU1103.md).</span></span> <span data-ttu-id="5ad2c-122">Si noti che gli errori dai comandi `nuget.exe` indicano solo l'ultima origine controllata, ma implicano che il pacchetto non era disponibile da qualsiasi origine.</span><span class="sxs-lookup"><span data-stu-id="5ad2c-122">Note that errors from `nuget.exe` commands show only the last source checked, but implies that the package wasn't available from any source.</span></span>

   <span data-ttu-id="5ad2c-123">Per l'acquisizione del pacchetto può essere applicato l'ordine delle origini nella configurazione NuGet:</span><span class="sxs-lookup"><span data-stu-id="5ad2c-123">When acquiring the package, the order of sources in the NuGet configuration may apply:</span></span>

   - <span data-ttu-id="5ad2c-124">NuGet controlla la cartella locale delle origini e le condivisioni di rete prima di controllare le origini HTTP.</span><span class="sxs-lookup"><span data-stu-id="5ad2c-124">NuGet checks sources local folder and network shares before checking HTTP sources.</span></span>

3. <span data-ttu-id="5ad2c-125">Salvare una copia del pacchetto e altre informazioni nella cartella *http-cache* come descritto in [Gestione delle cartelle dei pacchetti globali e della cache](../consume-packages/managing-the-global-packages-and-cache-folders.md).</span><span class="sxs-lookup"><span data-stu-id="5ad2c-125">Save a copy of the package and other information in the *http-cache* folder as described on [Managing the global packages and cache folders](../consume-packages/managing-the-global-packages-and-cache-folders.md).</span></span>

4. <span data-ttu-id="5ad2c-126">Se il pacchetto è stato scaricato, installare il pacchetto nella cartella *global-packages* per utente.</span><span class="sxs-lookup"><span data-stu-id="5ad2c-126">If downloaded, install the package into the per-user *global-packages* folder.</span></span> <span data-ttu-id="5ad2c-127">NuGet crea una sottocartella per ogni identificatore di pacchetto, quindi crea sottocartelle per ogni versione installata del pacchetto.</span><span class="sxs-lookup"><span data-stu-id="5ad2c-127">NuGet creates a subfolder for each package identifier, then creates subfolders for each installed version of the package.</span></span>

5. <span data-ttu-id="5ad2c-128">NuGet installa le dipendenze dei pacchetti se necessario.</span><span class="sxs-lookup"><span data-stu-id="5ad2c-128">NuGet installs package dependencies as required.</span></span> <span data-ttu-id="5ad2c-129">Questo processo potrebbe aggiornare le versioni del pacchetto nel processo, come descritto in [Risoluzione delle dipendenze](../concepts/dependency-resolution.md).</span><span class="sxs-lookup"><span data-stu-id="5ad2c-129">This process might update package versions in the process, as described in [Dependency Resolution](../concepts/dependency-resolution.md).</span></span>

6. <span data-ttu-id="5ad2c-130">Aggiornare altri file e cartelle di progetto:</span><span class="sxs-lookup"><span data-stu-id="5ad2c-130">Update other project files and folders:</span></span>

    - <span data-ttu-id="5ad2c-131">Per i progetti che usano PackageReference, aggiornare il grafico delle dipendenze del pacchetto archiviato in `obj/project.assets.json`.</span><span class="sxs-lookup"><span data-stu-id="5ad2c-131">For projects using PackageReference, update the package dependency graph stored in `obj/project.assets.json`.</span></span> <span data-ttu-id="5ad2c-132">Il contenuto del pacchetto stesso non viene copiato in alcuna cartella di progetto.</span><span class="sxs-lookup"><span data-stu-id="5ad2c-132">Package contents themselves are not copied into any project folder.</span></span>
    - <span data-ttu-id="5ad2c-133">Aggiornare `app.config` e/o `web.config` se il pacchetto usa [trasformazioni di file di origine e file di configurazione](../create-packages/source-and-config-file-transformations.md).</span><span class="sxs-lookup"><span data-stu-id="5ad2c-133">Update `app.config` and/or `web.config` if the package uses [source and config file transformations](../create-packages/source-and-config-file-transformations.md).</span></span>

7. <span data-ttu-id="5ad2c-134">(Solo Visual Studio) Visualizzare il file Leggimi del pacchetto, se disponibile, in una finestra di Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="5ad2c-134">(Visual Studio only) Display the package's readme file, if available, in a Visual Studio window.</span></span>

<span data-ttu-id="5ad2c-135">In conclusione, con i pacchetti NuGet la codifica è produttiva.</span><span class="sxs-lookup"><span data-stu-id="5ad2c-135">Enjoy your productive coding with NuGet packages!</span></span>
